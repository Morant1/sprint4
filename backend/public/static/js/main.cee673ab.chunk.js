(this["webpackJsonpmister-app"]=this["webpackJsonpmister-app"]||[]).push([[0],{141:function(e,t,n){e.exports=n(310)},197:function(e,t){},309:function(e,t,n){},310:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),s=n(12),i=n(5),l=n.n(i),u=n(11),p=n(26),m=n(8),d=n(16),h=n(17),f=n(19),y=n(18),g=n(20),v=n(336),b=n(129),E=n.n(b).a.create({withCredentials:!0}),O=function(e,t){return k(e,"GET",t)},j=function(e,t){return k(e,"POST",t)},S=function(e,t){return k(e,"PUT",t)},w=function(e,t){return k(e,"DELETE",t)};function k(e){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(l.a.mark((function e(t){var n,a,r,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"get",a=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,E({url:"".concat("/api/").concat(t),method:n,data:a});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var x={login:function(e){return T.apply(this,arguments)},logout:function(){return _.apply(this,arguments)},signup:function(e){return U.apply(this,arguments)},getUsers:function(){return O("user")}};function T(){return(T=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login info",t),e.prev=1,e.next=4,j("auth/login",t);case 4:return n=e.sent,e.abrupt("return",A(n));case 8:e.prev=8,e.t0=e.catch(1),alert("Please sign up first");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function U(){return(U=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("auth/signup",t);case 2:return n=e.sent,e.abrupt("return",A(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function N(){return function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var D=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",loginCred:{password:"",username:""},signupCred:{isAdmin:!1,password:"",username:""}},e.componentDidMount=function(){e.props.loadUsers()},e.loginHandleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{loginCred:Object(m.a)(Object(m.a)({},e.loginCred),{},Object(p.a)({},a,r))}}))},e.signupHandleChange=function(t){var n=t.target,a=n.name,r=n.value;"isAdmin"===a&&(r=!0),e.setState((function(e){return{signupCred:Object(m.a)(Object(m.a)({},e.signupCred),{},Object(p.a)({},a,r))}}))},e.doLogin=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,o,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.loginCred,r=a.username,o=a.password,r&&o){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter username/password"}));case 4:c={username:r,password:o},e.props.login(c).then((function(t){t&&e.props.history.push("/toy")})),e.setState({loginCred:{username:"",password:""}});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,o,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.signupCred,r=a.isAdmin,o=a.password,c=a.username,console.log("sign-up Login",e.state.signupCred),o&&c){t.next=5;break}return t.abrupt("return",e.setState({msg:"Username & password inputs are required!"}));case 5:s={isAdmin:r,password:o,username:c},e.props.signup(s).then((function(t){t&&e.props.history.push("/toy")})),e.setState({signupCred:{isAdmin:!1,password:"",username:""}});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"log-sign-container flex center round"},r.a.createElement("form",{onSubmit:this.doSignup},r.a.createElement("h2",null,this.state.msg),r.a.createElement("input",{type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username",autoComplete:"off",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password",required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"admin",style:{color:"white"}},"Admin?"),r.a.createElement("input",{id:"admin",name:"isAdmin",type:"checkbox",value:!0,onChange:this.signupHandleChange}),r.a.createElement("br",null),r.a.createElement(v.a,{type:"submit",size:"small",variant:"contained"},"Signup")),r.a.createElement("form",{onSubmit:this.doLogin},r.a.createElement("input",{type:"text",name:"username",value:this.state.loginCred.username,onChange:this.loginHandleChange,placeholder:"Username",autoComplete:"off",required:!0}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password",required:!0}),r.a.createElement("br",null),r.a.createElement(v.a,{type:"submit",size:"small",variant:"contained"},"Login"))))}}]),n}(a.Component),M={login:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.login(e);case 2:return a=t.sent,n({type:"SET_USER",user:a}),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:N,signup:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.signup(e);case 2:return a=t.sent,n({type:"SET_USER",user:a}),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},loadUsers:function(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getUsers();case 3:n=e.sent,console.log("users",n),t({type:"SET_USERS",users:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err in loadUsers",e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},P=Object(g.b)((function(e){return{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser}}),M)(D),F={query:function(e){var t="?";for(var n in e)t+="".concat(n,"=").concat(e[n],"&");return O("toy".concat(t||""))},getById:function(e){return z.apply(this,arguments)},remove:function(e){return w("toy/".concat(e))},save:function(e){return I.apply(this,arguments)}};function z(){return(z=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("toy/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=7;break}return e.next=3,S("toy/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.next=9,j("toy",t);case 9:return a=e.sent,console.log("addToy",a),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=n(22);function R(e){var t=e.toy,n=e.removeToy;return r.a.createElement("div",{className:"toy-preview center"},r.a.createElement("img",{className:"toy-img",alt:"toy-img",style:{width:"30px"},src:"toy.png"}),r.a.createElement("div",{className:"type"},t.type),r.a.createElement("hr",null),r.a.createElement("h1",{className:"preview-name"},t.name),r.a.createElement("h4",null,"Price:",t.price,"$"),r.a.createElement(v.a,{onClick:function(){return n(t._id)},size:"small",variant:"contained"},"Delete"),r.a.createElement(B.b,{to:"/toy/".concat(t._id)},r.a.createElement(v.a,{size:"small",variant:"contained"},"Details")),r.a.createElement(B.b,{to:"/toy/edit/".concat(t._id)},r.a.createElement(v.a,{size:"small",variant:"contained"},"Edit")))}function H(e){var t=e.toys,n=e.removeToy;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"add-toy"},r.a.createElement(B.b,{to:"/toy/edit"},r.a.createElement(v.a,{size:"small",variant:"contained"},"Add toy"))),r.a.createElement("div",{className:"grid-list-container"},t.map((function(e){return r.a.createElement(R,{removeToy:n,toy:e,key:e._id})}))))}H.defaultProps={toys:[]};var L=n(342),G=n(340),q=n(341),W=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filter:{name:"",inStock:"",type:"",sort:"name"}},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{filter:Object(m.a)(Object(m.a)({},e.filter),{},Object(p.a)({},a,r))}}),(function(){return e.props.onSetFilter(e.state.filter)}))},e.onFilter=function(t){t.preventDefault(),e.props.onSetFilter(e.state.filter)},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state.filter,t=e.name,n=e.inStock,a=e.type,o=e.sort;return r.a.createElement("form",{className:"main-filter-container flex justify-center",onSubmit:this.onFilter},r.a.createElement("div",{className:"filter-name"},r.a.createElement("label",{className:"by-name"},"By name"),r.a.createElement("input",{type:"text",name:"name",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"filter-stock-type flex"},r.a.createElement(L.a,{id:"stock Status"},"Stock"),r.a.createElement(G.a,{labelId:"stock Status",name:"inStock",value:n,onChange:this.handleChange},r.a.createElement(q.a,{value:""},"All"),r.a.createElement(q.a,{value:"true"},"IN STOCK"),r.a.createElement(q.a,{value:"false"},"OUT OF STOCK")),r.a.createElement(L.a,{id:"type"},"Type"),r.a.createElement(G.a,{labelId:"type",name:"type",value:a,onChange:this.handleChange},r.a.createElement(q.a,{value:""},"All"),r.a.createElement(q.a,{value:"Funny"},"Funny"),r.a.createElement(q.a,{value:"Educational"},"Educational"),r.a.createElement(q.a,{value:"Adult"},"Adult"))),r.a.createElement("div",{className:"filter-sort flex"},r.a.createElement(L.a,{id:"sort"},"Sort By"),r.a.createElement(G.a,{labelId:"sort",name:"sort",value:o,onChange:this.handleChange},r.a.createElement(q.a,{value:"name"},"name"),r.a.createElement(q.a,{value:"price"},"price"))),r.a.createElement(v.a,{size:"small",variant:"contained"},"Filter"))}}]),n}(a.Component),Y=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{sort:"name"}},e.onSetFilter=function(t){e.setState({filterBy:t},(function(){return e.props.loadToys(e.state.filterBy)}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys(this.state.filterBy)}},{key:"render",value:function(){var e=this.props.toys;return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main-header center"},r.a.createElement(W,{onSetFilter:this.onSetFilter})),r.a.createElement(H,{removeToy:this.props.removeToy,toys:e})):r.a.createElement("div",null,"Loading....")}}]),n}(a.Component),J={loadToys:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e),t.next=4,F.query(e);case 4:a=t.sent,n({type:"SET_TOYS",toys:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("err in loadToys",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},removeToy:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.remove(e);case 3:n({type:"REMOVE_TOY",id:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("err in removeToy",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}};Y.defaultProps={toys:[]};var K,V=Object(g.b)((function(e){return{toys:e.toyReducer.toys}}),J)(Y),X=n(68),$=n(133),Q=n.n($),Z={setup:function(){K=Q()("/")},terminate:function(){K=null},on:function(e,t){K.on(e,t)},off:function(e,t){K.off(e,t)},emit:function(e,t){K.emit(e,t)}};var ee=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={typeMsg:"",msg:{from:e.props.loggedUser,txt:""},msgs:[],topic:e.props.id},e.addMsg=function(t){e.setState((function(e){return{msgs:[].concat(Object(X.a)(e.msgs),[t])}}))},e.sendMsg=function(t){t.preventDefault(),Z.emit("chat newMsg",e.state.msg),e.setState({msg:Object(m.a)(Object(m.a)({},e.state.msg),{},{txt:""}),typeMsg:""})},e.msgHandleFocus=function(t){var n="".concat(e.state.msg.from," is typing...");Z.emit("typing Msg",n),e.setState({typeMsg:n})},e.msgHandleBlur=function(t){Z.emit("typing Msg",""),e.setState({typeMsg:""})},e.msgHandleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{msg:Object(m.a)(Object(m.a)({},e.msg),{},Object(p.a)({},a,r))}}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;Z.setup(),Z.emit("chat topic",this.state.topic),Z.on("chat addMsg",this.addMsg),Z.on("chat history",(function(t){e.setState({msgs:t[e.state.topic]||[]})}))}},{key:"componentWillUnmount",value:function(){Z.off("chat addMsg",this.addMsg),Z.terminate()}},{key:"render",value:function(){return r.a.createElement("div",{className:"chat"},r.a.createElement("form",{onSubmit:this.sendMsg},r.a.createElement("input",{type:"text",value:this.state.msg.txt,onChange:this.msgHandleChange,onFocus:this.msgHandleFocus,onBlur:this.msgHandleBlur,name:"txt",autoComplete:"off"}),r.a.createElement("button",null,"Send")),this.state.typeMsg&&r.a.createElement("div",null,this.state.typeMsg),r.a.createElement("ul",{style:{padding:"0"}},this.state.msgs&&this.state.msgs.map((function(e,t){return r.a.createElement("li",{style:{listStyle:"none",border:"1px solid lightgrey"},key:t},r.a.createElement("span",{style:{color:"lightblue"}},e.from),": ",e.txt)}))),r.a.createElement("hr",null),"ESC FOR CLOSE")}}]),n}(a.Component),te=Object(g.b)((function(e){return{loggedUser:e.userReducer.loggedinUser.username}}))(ee),ne=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:null,isPopUp:!1},e.closePopup=function(t){"Escape"===t.key&&e.setState({isPopUp:!1})},e.loadToy=function(){var t=e.props.match.params._id;F.getById(t).then((function(t){return e.setState({toy:t})}))},e.onGetBack=function(){e.props.history.push("/toy")},e.openPopUp=function(){e.setState({isPopUp:!0})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.closePopup),this.loadToy()}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.closePopup)}},{key:"componentDidUpdate",value:function(e,t){e.match.params._Id!==this.props.match.params._Id&&this.loadToy()}},{key:"render",value:function(){var e=this,t=this.state,n=t.toy,a=t.isPopUp;return n?r.a.createElement("div",{className:"toy-details center"},r.a.createElement("div",{className:"type"},"Type:",n.type),r.a.createElement("hr",null),r.a.createElement("h1",null,"Name:",n.name),r.a.createElement("h2",null,"Price:",n.price),r.a.createElement("h3",null,"CreatedAt:",new Date(n.createdAt).toDateString()),r.a.createElement("h3",null,n.inStock?"IN STOCK":"NOT IN STOCK"),r.a.createElement(v.a,{onClick:this.onGetBack,size:"small",variant:"contained"},"Back"),r.a.createElement(v.a,{onClick:function(){e.openPopUp()},size:"small",variant:"contained"},"Open Chat\u2709"),a&&r.a.createElement(te,{id:n._id,name:n.name})):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),ae=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:{name:"",price:"",type:"",inStock:!0}},e.handleInput=function(t){var n=t.target,a=n.name,r="number"===n.type?+n.value:n.value;e.setState((function(e){return{toy:Object(m.a)(Object(m.a)({},e.toy),{},Object(p.a)({},a,r))}}))},e.onSaveToy=function(t){t.preventDefault();var n=e.state.toy;e.state.toy._id?e.props.updateToy(n):e.props.addToy(n),e.props.history.push("/toy")},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params._id;t&&F.getById(t).then((function(t){e.setState({toy:t})}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(e.match.params._id!==this.props.match.params._id){var a=this.props.match.params._id;a&&F.getById(a).then((function(e){n.setState({toy:e})}))}}},{key:"render",value:function(){var e=this.state.toy;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onSaveToy,className:"edit-toy flex"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{autoFocus:!0,placeholder:"Toy Name",type:"text",value:e.name,onChange:this.handleInput,name:"name"}),r.a.createElement("label",null,"Price"),r.a.createElement("input",{type:"number",value:e.price,placeholder:"Toy Price",onChange:this.handleInput,name:"price"}),r.a.createElement("label",null,"Type"),r.a.createElement("input",{type:"text",value:e.type,placeholder:"Toy type",onChange:this.handleInput,name:"type"}),r.a.createElement("label",null,"Stock status"),r.a.createElement("select",{name:"inStock",value:e.inStock,onChange:this.handleInput},r.a.createElement("option",{value:"true"},"True"),r.a.createElement("option",{value:"False"},"False")),r.a.createElement(v.a,{type:"submit",size:"small",variant:"contained"},"Save")))}}]),n}(a.Component),re={addToy:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("add",e),t.next=4,F.save(e);case 4:n({type:"ADD_TOY",toy:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err in addToy",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateToy:function(e){return function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("update",e),t.next=4,F.save(e);case 4:n({type:"UPDATE_TOY",toy:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("err in updateToy",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},oe=Object(g.b)((function(e){return{toys:e.toyReducer.toys}}),re)(ae),ce=n(134),se=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getToysType=function(){var t=e.props.toys.reduce((function(e,t){return e[t.type]?e[t.type]+=t.price:e[t.type]=t.price,e}),{});return{types:Object.keys(t),prices:Object.values(t)}},e.onGetBack=function(){e.props.history.push("/toy")},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.getToysType(),t={labels:e.types,datasets:[{label:"My First dataset",backgroundColor:["rgba(255,0,0,0.3)","rgba(0,0,255,0.3)","rgba(255,255,0,0.3)"],borderColor:"rgba(192,192,192,0.3)",borderWidth:1,hoverBackgroundColor:"rgba(192,192,192,0.3)",hoverBorderColor:"rgba(192,192,192,0.3)",data:e.prices}]};return r.a.createElement("div",null,r.a.createElement(ce.Doughnut,{data:t,options:{title:{display:!0,text:"Sum Potential income per type"}}}))}}]),n}(a.Component),ie=Object(g.b)((function(e){return{toys:e.toyReducer.toys}}))(se),le=n(55),ue={query:function(){return pe.apply(this,arguments)}};function pe(){return(pe=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("branch");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={branches:[],center:{lat:32.0853,lng:34.7818},zoom:7},e.componentDidMount=function(){ue.query().then((function(t){return e.setState({branches:t},(function(){return console.log(e.state)}))}))},e.onGetPos=function(t){e.setState({center:t,zoom:14})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.state.branches;if(!t.length)return r.a.createElement("div",null,"Loading...");return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.Map,{initialCenter:this.state.center,style:{width:"80%",height:"80%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},center:this.state.center,google:this.props.google,zoom:this.state.zoom},t.map((function(e){return r.a.createElement(le.Marker,{key:e._id,position:e.pos,name:e.name},r.a.createElement(le.InfoWindow,{visible:!0},r.a.createElement("div",null,e.name)))}))),r.a.createElement("div",{className:"locations center"},r.a.createElement(v.a,{size:"small",variant:"contained",onClick:function(){e.onGetPos({lat:31.771959,lng:35.217018})}},"Jerusalem"),r.a.createElement(v.a,{size:"small",variant:"contained",onClick:function(){e.onGetPos({lat:32.08088,lng:34.78057})}},"Tel Aviv"),r.a.createElement(v.a,{size:"small",variant:"contained",onClick:function(){e.onGetPos({lat:32.794044,lng:34.989571})}},"Haifa")))}}]),n}(a.Component),de=Object(le.GoogleApiWrapper)({apiKey:"AIzaSyA7wFxeGayDFtxLfft53sDr7sMu9cj7Vio"})(me),he=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onLogout=function(){e.props.logout().then((function(t){return e.props.history.push("/")}))},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar flex column"},r.a.createElement("div",null,this.props.loggedinUser?r.a.createElement(B.b,{to:"/toy"},r.a.createElement(v.a,{size:"small",variant:"contained"},"Home")):r.a.createElement(B.b,{to:"/"},r.a.createElement(v.a,{size:"small",variant:"contained"},"Home")),r.a.createElement(B.b,{to:"/about"},r.a.createElement(v.a,{size:"small",variant:"contained"},"About")),this.props.loggedinUser&&r.a.createElement(B.b,{to:"/dash"},r.a.createElement(v.a,{size:"small",variant:"contained"},"Dashboard"))),r.a.createElement("div",null,r.a.createElement(v.a,{className:"logout",onClick:this.onLogout,size:"small",variant:"contained"},"Logout",r.a.createElement("img",{className:"toy-img",alt:"toy-img",style:{width:"30px"},src:"toy.png"}))),this.props.loggedinUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"center"},"Welcome ",this.props.loggedinUser.username,this.props.loggedinUser.isAdmin?r.a.createElement("span",{style:{fontSize:"14px",color:"lightblue"}},"   (Admin)"):""),r.a.createElement("div",{style:{fontSize:"10px",color:"lightgrey"}},"*Edit/Delete/Add options for Admin only")))}}]),n}(a.Component),fe={logout:N},ye=Object(g.b)((function(e){return{loggedinUser:e.userReducer.loggedinUser}}),fe)(Object(s.f)(he));var ge=function(){return r.a.createElement("div",{className:"App main-container"},r.a.createElement(ye,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{component:oe,path:"/toy/edit/:_id?"}),r.a.createElement(s.a,{component:ne,path:"/toy/:_id"}),r.a.createElement(s.a,{component:ie,path:"/dash"}),r.a.createElement(s.a,{component:de,path:"/about"}),r.a.createElement(s.a,{component:V,path:"/toy"}),r.a.createElement(s.a,{component:P,path:"/"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=n(43),be=n(135),Ee={toys:[]};var Oe=null;sessionStorage.user&&(Oe=JSON.parse(sessionStorage.user));var je={users:[],loggedinUser:Oe};var Se=Object(ve.c)({toyReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return Object(m.a)(Object(m.a)({},e),{},{toys:t.toys});case"UPDATE_TOY":return Object(m.a)(Object(m.a)({},e),{},{toys:e.toys.map((function(e){return e._id===t.toy._id?t.toy:e}))});case"ADD_TOY":return Object(m.a)(Object(m.a)({},e),{},{toys:[].concat(Object(X.a)(e.toys),[t.toy])});case"REMOVE_TOY":var n=e.toys.filter((function(e){return e._id!==t.id}));return Object(m.a)(Object(m.a)({},e),{},{toys:n});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(m.a)(Object(m.a)({},e),{},{loggedinUser:t.user});case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{users:t.users});default:return e}}}),we=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ve.d,ke=Object(ve.e)(Se,we(Object(ve.a)(be.a)));ke.subscribe((function(){console.log("Global state is:",ke.getState())}));n(309);c.a.render(r.a.createElement(g.a,{store:ke},r.a.createElement(B.a,null,r.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.cee673ab.chunk.js.map